# Dockerè¨­å®š

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Dockeré–¢é€£ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
docker/
â”œâ”€â”€ dev/                    # é–‹ç™ºç’°å¢ƒç”¨
â”‚   â””â”€â”€ docker-compose.dev.yml
â”œâ”€â”€ prod/                   # æœ¬ç•ªç’°å¢ƒç”¨
â”‚   â”œâ”€â”€ docker-compose.prod.yml
â”‚   â””â”€â”€ Dockerfile.dev
â””â”€â”€ README.md              # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### é–‹ç™ºç’°å¢ƒ
```bash
# é–‹ç™ºç’°å¢ƒèµ·å‹•
docker-compose -f docker/dev/docker-compose.dev.yml up -d

# ã¾ãŸã¯ Makefileä½¿ç”¨
make docker-dev
```

### æœ¬ç•ªç’°å¢ƒ
```bash
# æœ¬ç•ªç’°å¢ƒèµ·å‹•
docker-compose -f docker/prod/docker-compose.prod.yml up -d

# ã¾ãŸã¯ Makefileä½¿ç”¨
make docker-prod
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®Dockerè¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ä¸»è¦ãªDockerãƒ•ã‚¡ã‚¤ãƒ«ï¼š
- `Dockerfile` - ãƒ¡ã‚¤ãƒ³ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸å®šç¾©
- `docker-compose.yml` - åŸºæœ¬ã®Docker Composeè¨­å®š
- `.dockerignore` - Dockerãƒ“ãƒ«ãƒ‰æ™‚ã®é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«

## ğŸ”§ è¨­å®šè©³ç´°

### é–‹ç™ºç’°å¢ƒã®ç‰¹å¾´
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œ
- ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹
- é–‹ç™ºç”¨ãƒãƒ¼ãƒˆè¨­å®š
- ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆã§ã‚³ãƒ¼ãƒ‰å¤‰æ›´åæ˜ 

### æœ¬ç•ªç’°å¢ƒã®ç‰¹å¾´
- æœ€é©åŒ–ã•ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- Nginx ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
- ãƒ­ã‚°ç®¡ç†
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

## ğŸ“Š ç›£è¦–ãƒ»ãƒ­ã‚°

### ãƒ­ã‚°ç¢ºèª
```bash
# é–‹ç™ºç’°å¢ƒ
docker-compose -f docker/dev/docker-compose.dev.yml logs -f

# æœ¬ç•ªç’°å¢ƒ
docker-compose -f docker/prod/docker-compose.prod.yml logs -f

# Makefileä½¿ç”¨
make docker-logs
```

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª
curl http://localhost:5000/health

# æœ¬ç•ªç’°å¢ƒï¼ˆNginxçµŒç”±ï¼‰
curl http://localhost/health
```

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**ãƒãƒ¼ãƒˆç«¶åˆ**
```bash
# ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã‚’ç¢ºèª
netstat -tulpn | grep :5000

# ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
docker-compose down
```

**ã‚¤ãƒ¡ãƒ¼ã‚¸æ›´æ–°**
```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸å†ãƒ“ãƒ«ãƒ‰
docker-compose build --no-cache

# å¤ã„ã‚¤ãƒ¡ãƒ¼ã‚¸å‰Šé™¤
docker image prune
```

**ãƒœãƒªãƒ¥ãƒ¼ãƒ å•é¡Œ**
```bash
# ãƒœãƒªãƒ¥ãƒ¼ãƒ ç¢ºèª
docker volume ls

# ãƒœãƒªãƒ¥ãƒ¼ãƒ å‰Šé™¤
docker volume prune
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### æœ¬ç•ªç’°å¢ƒã§ã®æ³¨æ„ç‚¹
- ç’°å¢ƒå¤‰æ•°ã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†
- érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®å®Ÿè¡Œ
- æœ€å°æ¨©é™ã®åŸå‰‡
- å®šæœŸçš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸æ›´æ–°

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³
docker scan your-image:tag

# Dockerfileã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãƒã‚§ãƒƒã‚¯
docker run --rm -i hadolint/hadolint < Dockerfile
```